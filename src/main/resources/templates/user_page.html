<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Market</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
<!--HEADER /includes/header.html-->
<div th:replace="/includes/header :: header"></div>
<!--Main container-->
<section class="d-flex">
    <!--Sidebar-->
    <div class="bg-light" style="width: 450px; min-height: 100vh; padding-top: 30px; padding-bottom: 200px">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 d-flex align-items-center">
                    <img th:src="${user.getImage().getUrl()}" alt="user_image" width="100px" height="100px">
                </div>
                <div class="col-12 d-flex align-items-center">
                    <h2 th:text="${user.getFirstName() + ' ' + user.getLastName()}">Alexandr Alexandrov</h2>
                </div>

                <div class="col-12 d-flex justify-content-center">
                    <hr style="width: 100%; margin: 0;">
                </div>
                <!--User information-->
                <div class="col-12 mt-4">
                    <p>Username: <b th:text="${user.getUsername()}">user1</b></p>
                    <p>Email: <b th:text="${user.getEmail()}">user@email.ru</b></p>
                    <p>Номер телефона: <b th:text="${user.getPhone()}">8950432123</b></p>
                    <p>Страна: <b th:text="${user.getAdress().getCountry().getName()}">Росссия</b></p>
                    <p>Город: <b th:text="${user.getAdress().getCity().getName()}">Москва</b></p>
                    <p>Улица: <b th:text="${user.getAdress().getStreet()}">Ленина</b></p>
                    <p>Дом: <b th:text="${user.getAdress().getHouse()}">3а</b></p>
                    <input type="hidden" th:value="${user.getId()}" id="user_id">
                </div>
            </div>
        </div>
    </div>

    <!--Main Body-->
    <div class="container-fluid" style="padding-top: 30px; padding-left: 35px;">
        <div class="row">
            <div class="col-12 p-0">
                <h1 id="user_panel_head">Ваши магазины:</h1>
            </div>
            <div class="col-12 mt-4 p-0">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" id="shop_view_btn" aria-current="page"  href="#1">Магазины</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#2" id="orers_view_btn">Заказы</a>
                    </li>
                </ul>
            </div>
        </div>
        <!--панель заказов и магазинов-->
        <div class="row shadow-sm p-0 border">
            <div class="col-12 py-1 px-3 d-flex align-items-center" style="background: #F2F2F2;">
            </div>

            <div class="col-12 bg-white d-flex justify-content-center py-3 px-3">

                <!--магазины пользователя-->
                <div id="shop_view_panel" class="col-12 collapse show">
                    <div class="col-12 d-flex flex-wrap mt-3" id="content_container">
                        <div class="card" style="width: 18rem; margin-right: 15px; margin-top: 20px;">
                            <img src="" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Заголовок магазина</h5>
                                <p class="card-text">Рейтинг магазина:</p>
                                <a href="#" class="btn btn-danger">Перейти в магазин</a>
                            </div>
                        </div>
                        <div class="card" style="width: 18rem; margin-right: 15px; margin-top: 20px;">
                            <img src="" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Заголовок магазина</h5>
                                <p class="card-text">Рейтинг магазина:</p>
                                <a href="#" class="btn btn-danger">Перейти в магазин</a>
                            </div>
                        </div>
                        <div class="card" style="width: 18rem; margin-right: 15px; margin-top: 20px;">
                            <img src="" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Заголовок магазина</h5>
                                <p class="card-text">Рейтинг магазина:</p>
                                <a href="#" class="btn btn-danger">Перейти в магазин</a>
                            </div>
                        </div>
                        <div class="card" style="width: 18rem; margin-right: 15px; margin-top: 20px;">
                            <img src="" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Заголовок магазина</h5>
                                <p class="card-text">Рейтинг магазина:</p>
                                <a href="#" class="btn btn-danger">Перейти в магазин</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!--заказы-->
                <div id="order_view_panel" class="col-12 collapse">
                    <!--заказы генерируются сюда-->
                    <div id="orders_container">
                        <div class="row my-2">
                            <div class="col-12 d-flex justify-content-between px-4">
                                <div>Дата заказа: <b>10.07.21</b></div>
                                <b>В пути</b>
                            </div>
                            <div class="col-12 d-flex justify-content-between px-4">
                                <div>Адрес доставки: <b>Россия, г.Москва, ул.Ленина, д.3</b></div>
                            </div>
                            <div class="col-12 d-flex justify-content-between px-4">
                                <div>Сумма заказа: <b>8100р</b></div>
                            </div>
                            <div class="col-12 px-4">
                                <table class="table table-striped" id="items_by_orders_table">
                                    <thead>
                                    <tr>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                    </tr>
                                    </thead>

                                    <tbody id="insert_items_by_order">
                                    <tr>
                                        <td><img src="" alt="item_img" width="80px" height="45px"></td>
                                        <td>Пальто</td>
                                        <td>Одежда</td>
                                        <td>6400р</td>
                                        <td>
                                            <a href="#">Страница товара</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><img src="" alt="item_img" width="80px" height="45px"></td>
                                        <td>Свитер</td>
                                        <td>Одежда</td>
                                        <td>1700р</td>
                                        <td>
                                            <a href="#">Страница товара</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="row my-2">
                            <div class="col-12 d-flex justify-content-between px-4">
                                <div>Дата заказа: <b>10.07.21</b></div>
                                <b>В пути</b>
                            </div>
                            <div class="col-12 d-flex justify-content-between px-4">
                                <div>Адрес доставки: <b>Россия, г.Москва, ул.Ленина, д.3</b></div>
                            </div>
                            <div class="col-12 d-flex justify-content-between px-4">
                                <div>Сумма заказа: <b>8100р</b></div>
                            </div>
                            <div class="col-12 px-4">
                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                        <th scope="col"></th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    <tr>
                                        <td><img src="" alt="item_img" width="80px" height="45px"></td>
                                        <td>Пальто</td>
                                        <td>Одежда</td>
                                        <td>6400р</td>
                                        <td>
                                            <a href="#">Страница товара</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><img src="" alt="item_img" width="80px" height="45px"></td>
                                        <td>Свитер</td>
                                        <td>Одежда</td>
                                        <td>1700р</td>
                                        <td>
                                            <a href="#">Страница товара</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>


            </div>
        </div>
    </div>
</section>
<!-- JavaScript Bundle with Popper -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script>
    $(document).ready(function() {
        const shopViewBtn = $('#shop_view_btn');
        const orderViewBtn = $('#orers_view_btn');
        const shopViewPanel = $('#shop_view_panel');
        const orderViewPanel = $('#order_view_panel');
        const userPanelHead = $('#user_panel_head');

        $('.collapse').on('show.bs.collapse hide.bs.collapse', function (e) {
            e.preventDefault();
        })

        $(shopViewBtn).on('click', function (e) {
            e.preventDefault();
            /*переключаем классы для отображения панели магазинов и скрытия панели заказов*/
            toggleUserPanel($(this),orderViewBtn,shopViewPanel,orderViewPanel);
            $(userPanelHead).html('Ваши магазины:');
        })
        $(orderViewBtn).on('click', function (e) {
            e.preventDefault();
            /*переключаем классы для отображения панели заказов и скрытия панели магазинов*/
            toggleUserPanel($(this),shopViewBtn,orderViewPanel,shopViewPanel);
            $(userPanelHead).html('Ваши заказы:');
        })
    })
    function toggleUserPanel(e1,e2,p1,p2) {
        $(e1).addClass('active');
        $(e2).removeClass('active');
        $(p1).addClass('show');
        $(p2).removeClass('show');
    }
</script>
</body>
</html>
